flowchart TD
    %% === PROJECT GOALS ===
    %% Ultimate Goal: Mingle - 소셜링 중심의 실시간 번역 앱으로 외국인과 깊이 있는 대화 가능하게
    %% Current Goal: Mingle 프리토타입 검증 및 핵심 기능 구현
    %% @lastActive: stop_finalize_retry_and_multi_provider_translate

    %% === START ===
    %% @project_start [start, closed]
    project_start("Next.js Project Start<br/><sub>Mingle 프로젝트의 기반이 되는<br/>Next.js 프레임워크와 기본 구조를<br/>설정하고 초기 환경을 구축함</sub>")

    %% === COMPLETED WORK ===
    %% @structure_refinement [ai-task, closed]
    structure_refinement("Structure & Error Fix<br/><sub>불필요한 폴더 위계를 제거하여<br/>구조를 단순화하고, 클라이언트 컴포넌트<br/>하이드레이션 에러를 해결하여 안정성 확보</sub>")

    %% @ui_ux_improvement [ai-task, closed]
    ui_ux_improvement("UI/UX Improvement<br/><sub>반응형 레이아웃을 적용하여<br/>다양한 화면 크기에서 일관된 경험을<br/>제공하고, 현대적인 감각의 UI로 개선</sub>")

    %% @gladia_stt_integration [ai-task, closed]
    gladia_stt_integration("Gladia STT Integration<br/><sub>Gladia API와 통신하는 Node.js 기반<br/>WebSocket 프록시 서버를 구현하여<br/>실시간 음성 인식을 가능하게 함</sub>")

    %% @language_selection [ai-task, closed]
    language_selection("Language Selection<br/><sub>사용자가 번역할 언어를 직접<br/>선택할 수 있는 기능을 추가하여<br/>다양한 언어권 사용자를 지원함</sub>")

    %% @mingle_landing_prototype [ai-task, closed]
    mingle_landing_prototype("Mingle Landing Page<br/><sub>서비스명 Mingle로 확정하고 소셜링<br/>핵심 가치를 담은 랜딩페이지 프리토타입<br/>React+Vite+Tailwind CSS v4로 구현</sub>")

    %% @landing_i18n [ai-task, closed]
    landing_i18n("Landing i18n 15개 언어<br/><sub>react-i18next로 다국어 지원 구현<br/>EN/KO/JA/ZH/FR/DE/ES/PT/IT/RU<br/>AR/HI/TH/VI 포함, RTL 지원</sub>")

    %% @landing_email_mockups [ai-task, closed]
    landing_email_mockups("이메일 수집 & UI 모킵<br/><sub>다운로드 버튼→이메일 모달 전환<br/>Prisma+PostgreSQL 백엔드 구축<br/>3인 대화 모킵/파티 시나리오/비포애프터 추가</sub>")

    %% @landing_ui_refinement [ai-task, closed]
    landing_ui_refinement("UI 개선 & 테마 변경<br/><sub>다크→라이트 모드, 파란색→노란색 테마<br/>CSS 기반 폰 목업으로 3인 대화 시연<br/>Before/After 3문제-3해결 세로 나열</sub>")

    %% @click_analytics [ai-task, closed]
    click_analytics("클릭 분석 & 유저 추적<br/><sub>버튼 클릭 시 IP/UA/언어/화면크기 등<br/>유저 정보 자동 저장, ButtonClick 모델<br/>이메일 없이도 방문자 행동 추적</sub>")

    %% === COMPLETED WORK (continued) ===
    %% @nextjs_fullstack_migration [ai-task, closed]
    nextjs_fullstack_migration("Next.js 풀스택 전환<br/><sub>mingle-landing을 Vite+Express에서<br/>Next.js App Router로 마이그레이션<br/>Vercel 배포, 방문자/클릭 추적, 다국어 라우팅</sub>")

    %% @landing_copy_update [ai-task, closed]
    landing_copy_update("랜딩 카피 전면 개편<br/><sub>15개 언어 hero/problem/features/coreValue<br/>문구 업데이트, 대화 끊김 없는 번역 강조<br/>4번째 문제점 추가, 불필요한 배지 삭제</sub>")

    %% @talk_to_world_section [ai-task, closed]
    talk_to_world_section("Talk to the World 섹션<br/><sub>사용 방법→글로벌 연결 섹션 교체<br/>15개 언어 번역, 전체너비 이미지 배치<br/>favicon 설정 완료</sub>")

    %% @gladia_user_onboarding [blocker, closed]
    gladia_user_onboarding("Gladia 유저 온보딩<br/><sub>Gladia 온보딩 500 에러로 신규 가입 불가<br/>버튼 코드 제거 완료, 서버 버그 해결 시<br/>재구현 필요 (key 중복 버그도 수정됨)</sub>")

    %% @deepgram_integration [ai-task, closed]
    deepgram_integration("Deepgram 통합 & UI 개선<br/><sub>Nova-3 모델 적용(단일언어 최적화)<br/>Detect Language 에러 해결 및<br/>자동 스크롤 기능 추가완료</sub>")

    %% @fireworks_integration [ai-task, closed]
    fireworks_integration("Fireworks AI 통합<br/><sub>Whisper 기반 V2 모델 연동 완료<br/>48kHz 샘플레이트 지원 패치<br/>다중 모델 선택 아키텍처 구축</sub>")

    %% @deepgram_multi [ai-task, closed]
    deepgram_multi("Deepgram Multi 모드 추가<br/><sub>language=multi 파라미터로 다국어<br/>코드 스위칭 전사 모드 추가<br/>기존 단일언어 모드와 별도 메뉴로 구성</sub>")

    %% @deepgram_multi_fix [ai-task, closed]
    deepgram_multi_fix("Deepgram Multi 언어감지 수정<br/><sub>detected_language→words[0].language<br/>+ channel.languages 폴백으로 변경<br/>지원 언어 10개 안내 UI 추가</sub>")

    %% @gladia_stt_only [ai-task, closed]
    gladia_stt_only("Gladia STT 전용 옵션<br/><sub>번역 없이 순수 STT만 사용하는<br/>옵션 추가, enableTranslation 파라미터로<br/>번역 on/off 제어</sub>")

    %% @soniox_integration [ai-task, closed]
    soniox_integration("Soniox V4 실시간 STT 통합<br/><sub>stt-rt-v4 모델 WebSocket 연동<br/>60+ 언어 자동 감지, 발화자 분리 지원<br/>디폴트 모델로 설정, 사용량 로깅 추가</sub>")

    %% @cleanup_and_usage_ui [ai-task, closed]
    cleanup_and_usage_ui("로그 제거 & 사용량 UI<br/><sub>서버/클라이언트 console.log 전부 제거<br/>Soniox 오디오 사용량을 WebSocket으로<br/>클라이언트 전달, 세션/누적 사용량 UI 표시</sub>")

    %% @gpt_translation [ai-task, closed]
    gpt_translation("AI 번역 통합 (모델 선택)<br/><sub>Claude Haiku 4.5 / GPT-5-nano 선택 가능<br/>모든 STT 프로바이더에 번역 적용<br/>Soniox language_hints_strict 토글 UI</sub>")

    %% @translation_engine_research [ai-task, closed]
    translation_engine_research("번역 기능 고도화<br/><sub>Deepgram/Fireworks는 번역 미지원<br/>별도 번역 엔진(GPT/DeepL 등)을<br/>붙이는 파이프라인 구축 필요</sub>")

    %% @live_phone_demo [ai-task, closed]
    live_phone_demo("랜딩 라이브 폰 데모<br/><sub>hero 정적 이미지를 CSS 스마트폰 프레임<br/>+ 실시간 STT 채팅 UI로 교체<br/>마이크 버튼으로 직접 체험 가능</sub>")

    %% @gemini_translation [ai-task, closed]
    gemini_translation("Gemini 번역 모델 추가<br/><sub>Gemini 2.5 Flash Lite / 3 Flash Preview<br/>번역 모델 추가, 데모는 Gemini Lite 사용<br/>@google/generative-ai SDK 연동</sub>")

    %% @demo_ux_and_restructure [ai-task, closed]
    demo_ux_and_restructure("데모 UX 개선 & 폴더 정리<br/><sub>폰 데모 반응형/노치/에러처리 개선<br/>hero에 번역기 테스트 버튼 추가<br/>레포를 mingle-landing + mingle-model-test로 분리</sub>")

    %% @demo_streaming_polish [ai-task, closed]
    demo_streaming_polish("스트리밍 번역 & UI 폴리시<br/><sub>부분 번역 ~2초 스트리밍, 국기 이모지 pill<br/>iPhone 녹음 인디케이터, bouncing dots<br/>기본언어 EN/KO/JA, Gemini Lite 기본값</sub>")

    %% @demo_usage_limit_ux [ai-task, closed]
    demo_usage_limit_ux("데모 사용량 제한 & UX 개선<br/><sub>30초/브라우저 사용량 제한 + 얼리액세스 모달<br/>언어 선택 드롭다운(최대5개), localStorage 영속성<br/>부분 번역 bouncing dots, 노치 확대, i18n 완성</sub>")

    %% @demo_bugfix_db_logging [ai-task, closed]
    demo_bugfix_db_logging("버그 수정 & 대화 DB 적재<br/><sub>React Strict Mode 중복 말풍선 수정<br/>대화록 DB 저장(번역 포함), 사용량 프로그레스바<br/>30초 제한 i18n, iPad 여백, Prisma directUrl</sub>")

    %% @prisma_local_simplify [ai-task, closed]
    prisma_local_simplify("Prisma 로컬 DB 단순화<br/><sub>prisma dev 임베디드 postgres → Homebrew PG14<br/>prisma+postgres:// 프록시 제거, 포트 5432<br/>directUrl 제거, Studio 안정 작동</sub>")

    %% @stt_server_landing_merge [ai-task, closed]
    stt_server_landing_merge("STT 서버 랜딩 통합<br/><sub>stt-server.ts를 mingle-landing으로 이동<br/>pnpm dev로 Next.js+STT 동시 실행<br/>WS URL 동적 hostname 지원</sub>")

    %% @railway_stt_deploy [ai-task, closed]
    railway_stt_deploy("Railway STT 서버 배포<br/><sub>stt-server.ts Railway 배포 설정<br/>railway.json, PORT 환경변수 대응<br/>Vercel+Railway 분리 아키텍처 구성</sub>")

    %% @global_stats_fix [ai-task, closed]
    global_stats_fix("Global Stats Mobile Fix<br/><sub>Social 버전 숫자 통계에서 + 기호 제거<br/>모바일 뷰에서 짤리는 문제 해결<br/>10M/100/120으로 표시 수정</sub>")

    %% @chat_invite_feature [ai-task, closed]
    chat_invite_feature("대화록 초대 기능<br/><sub>번역된 대화를 채팅방으로 저장하고<br/>상대방을 초대하여 헤어진 후에도<br/>연락을 이어갈 수 있는 핵심 기능</sub>")

    %% @mobile_app_development [ai-task, closed]
    mobile_app_development("Cross-Platform Mobile App<br/><sub>React Native 등을 활용하여 실시간<br/>연속 번역 기능을 탑재한 크로스<br/>플랫폼 모바일 애플리케이션 개발</sub>")

    %% @next_i18n_adoption [ai-task, closed]
    next_i18n_adoption("Next i18n 적용<br/><sub>Next.js 앱 라우팅에 다국어 구조를 적용하고<br/>번역 리소스/로케일 미들웨어를 정리해<br/>확장 가능한 국제화 기반을 구축</sub>")

    %% @next_auth_adoption [ai-task, closed]
    next_auth_adoption("NextAuth 적용<br/><sub>세션/인증 공통 레이어를 도입하여<br/>서버/클라이언트 인증 흐름을 통합하고<br/>보호 라우트 정책을 정비</sub>")

    %% @google_oauth_login [ai-task, closed]
    google_oauth_login("구글 로그인 적용<br/><sub>Google OAuth Provider를 연결하여<br/>소셜 로그인 진입을 구현하고<br/>계정 연동/세션 유지 시나리오를 검증</sub>")

    %% @capacitor_app_build [ai-task, closed]
    capacitor_app_build("Capacitor 앱 빌드 검증<br/><sub>웹 앱을 Capacitor로 패키징하여<br/>iOS/Android 네이티브 빌드 파이프라인과<br/>런타임 동작 가능성을 점검</sub>")

    %% @translator_feature_build [ai-task, closed]
    translator_feature_build("번역기 기능 구현<br/><sub>입력/감지/번역/출력까지 end-to-end<br/>번역 UX를 구성하고 실시간 대화 흐름에<br/>맞는 파이프라인을 완성</sub>")

    %% @seed_data_population [ai-task, closed]
    seed_data_population("시드 데이터 채워넣기<br/><sub>개발/테스트용 초기 데이터를 설계하고<br/>언어/유저/대화 샘플을 DB에 적재해<br/>기능 검증 속도를 높임</sub>")

    %% @instagram_crawling [ai-task, closed]
    instagram_crawling("인스타 크롤링 기능<br/><sub>타깃 데이터 수집 범위와 정책을 정의하고<br/>수집/정제 파이프라인을 구현해<br/>후속 분석 및 데이터 구축에 활용</sub>")

    %% @hellotalk_crawling [ai-task, closed]
    hellotalk_crawling("헬로톡 크롤링 기능<br/><sub>언어교환 도메인 데이터 수집 파이프라인을<br/>설계/구현하고 데이터 품질 기준을 정해<br/>시드/추천 실험에 활용</sub>")

    %% @tts_provider_research [ai-task, closed]
    tts_provider_research("TTS 프로바이더 리서치/비교<br/><sub>실시간/비실시간 후보군 가격을 시간당으로 통일<br/>언어수/스트리밍 여부/데모 유무 비교 완료<br/>Inworld 중심 도입 방향으로 정리</sub>")

    %% @inworld_non_realtime_strategy [ai-task, closed]
    inworld_non_realtime_strategy("Inworld 비실시간 전략 확정<br/><sub>번역 확정 후 TTS 합성으로 1차 구현<br/>레이턴시 이슈 시 실시간 스트리밍으로 전환<br/>voiceId/언어코드 매핑 조사 완료</sub>")

    %% @gaming_tts_test_section_spec [ai-task, closed]
    gaming_tts_test_section_spec("Gaming 테스트 섹션 TTS 스펙 확정<br/><sub>입력: 번역 확정 텍스트 + 대상 언어<br/>출력: Inworld 합성 음성 재생/중단/오류 처리<br/>기본 voiceId 매핑 정책 정의</sub>")

    %% @gaming_tts_test_section_apply [ai-task, closed]
    gaming_tts_test_section_apply("Gaming 테스트 섹션 TTS 적용 (mingle-landing)<br/><sub>Inworld API Route + 첫 번역문 자동 재생 연결<br/>언어별 voice fallback 및 mini 모델 기본값 반영<br/>로컬 .env 인증키(fallback alias) 지원</sub>")

    %% @gaming_tts_queue_ui_polish [ai-task, closed]
    gaming_tts_queue_ui_polish("Gaming TTS 큐 안정화 & 재생 UI 표시<br/><sub>자동 데모 재생 구간에서는 TTS 비활성화<br/>유저 테스트 시작 후에만 TTS arm 처리<br/>final 번역 기준 큐 + 재생중 말풍선 음파 인디케이터 추가</sub>")

    %% @tts_mobile_lock_recovery [ai-task, closed]
    tts_mobile_lock_recovery("모바일 잠금/복귀 TTS 복구<br/><sub>iOS 잠금 해제 후 TTS 무음 상태 대응<br/>visibilitychange 재시도 + blocked 항목 큐 복원<br/>Enable Sound 버튼으로 수동 언락 후 재생 재개</sub>")

    %% @mobile_tts_autounlock_and_feedback_guard [ai-task, closed]
    mobile_tts_autounlock_and_feedback_guard("모바일 TTS 자동 언락 + 피드백 루프 완화<br/><sub>Enable Sound UI 제거, 사용자 제스처로 자동 언락 재시도<br/>TTS 재생 중 STT 오디오 업링크 잠시 suppress 처리<br/>getUserMedia echo/noise suppression 제약 강화</sub>")

    %% @stt_graceful_stop_finalize_flush [ai-task, closed]
    stt_graceful_stop_finalize_flush("STT 중단 시 강제 확정 + 번역/TTS 플러시<br/><sub>녹음 중지는 mic 업링크만 즉시 중단<br/>pending partial을 final 턴으로 확정 후 번역 완료까지 대기<br/>ack 후 소켓 종료로 중도 유실 완화(30초 제한 포함)</sub>")

    %% @soniox_provider_finalization_on_stop [ai-task, closed]
    soniox_provider_finalization_on_stop("Soniox 상태기반 종료 확정 처리<br/><sub>stop_recording 시 클라이언트 pending 텍스트 대신<br/>Soniox 서버 상태(finalized+non-final) 기준으로 final 확정<br/>ack 이후 클라이언트/서버 WS 순차 종료로 정합성 강화</sub>")

    %% @demo_limit_60s_inworld_tts_rate [ai-task, closed]
    demo_limit_60s_inworld_tts_rate("데모 제한 60초 + Inworld 말하기 속도 조정<br/><sub>테스트 섹션 사용 제한을 30초→60초로 확장<br/>i18n 제한 문구를 전 언어에서 60초로 동기화<br/>Inworld TTS audioConfig.speakingRate 기본값 1.2 적용</sub>")

    %% @tts_stt_concurrent_input_enable [ai-task, closed]
    tts_stt_concurrent_input_enable("TTS 재생 중 STT 동시 입력 허용<br/><sub>TTS 재생 상태와 연동된 STT 업링크 suppress 로직 제거<br/>TTS 출력 중에도 마이크 입력을 Soniox로 지속 전송<br/>브라우저 echo/noise suppression 기본 제약은 유지</sub>")

    %% @soniox_endpoint_finalize_immediate_tts [ai-task, closed]
    soniox_endpoint_finalize_immediate_tts("Soniox 엔드포인트 즉시 확정 처리<br/><sub><end> 토큰 감지 시 발화를 즉시 final로 확정<br/>번역 완료 직후 TTS 큐가 즉시 실행되도록 연결<br/>테스트 종료 시점까지 지연되던 발화 케이스 완화</sub>")

    %% @stop_interrupt_local_finalize_fallback [ai-task, closed]
    stop_interrupt_local_finalize_fallback("중단 시 partial 로컬 강제 확정 폴백<br/><sub>stop_recording ack 지연/유실 시 남은 partial을 클라이언트에서 final 승격<br/>중단 후 partial 말풍선 잔류를 제거하고 번역 연계를 안정화<br/>ack 대기시간/지연 close 보강으로 stop 레이스 완화</sub>")

    %% @stop_dedupe_scope_fix_for_tts_chain [ai-task, closed]
    stop_dedupe_scope_fix_for_tts_chain("중단 중복제거 범위 축소 (TTS 체인 복원)<br/><sub>global final dedupe를 stop 전용 dedupe로 축소<br/>세션 재시작 직후 발화가 dedupe로 누락되던 케이스 완화<br/>final→번역→TTS 연쇄가 재시작 후에도 이어지도록 보정</sub>")

    %% @stop_state_and_partial_translation_promote [ai-task, closed]
    stop_state_and_partial_translation_promote("중단 상태 UI 분리 + partial 번역 승격<br/><sub>stop 클릭 즉시 stopping 상태로 전환해 red 녹음 표시 해제<br/>로컬 강제 확정 시 partial 번역을 finalized로 승격<br/>ack 지연 시에도 final→TTS 체인이 끊기지 않도록 보강</sub>")

    %% @stop_immediate_finalize_and_translation_drain [ai-task, closed]
    stop_immediate_finalize_and_translation_drain("중단 즉시 final 확정 + 번역 드레인 대기<br/><sub>stop 시 partial을 즉시 final 승격해 지연 체감 제거<br/>ack timeout 구간에는 짧은 translation drain 대기 추가<br/>final 텍스트 기준 번역 업데이트 후 TTS 체인 복구</sub>")

    %% @forced_termination_finalize_hooks [ai-task, closed]
    forced_termination_finalize_hooks("강제 종료 이벤트 finalizing 훅 추가<br/><sub>1분 제한/오프라인/pagehide/visibilitychange에서 stop 트리거<br/>소켓 error/close 시 partial 로컬 확정 폴백 추가<br/>사용자 stop 외 종료에도 final→번역→TTS 체인 보존 강화</sub>")

    %% @stop_fallback_translate_api_and_fast_restart [ai-task, closed]
    stop_fallback_translate_api_and_fast_restart("중단 후 번역 API 폴백 + 재시작 지연 단축<br/><sub>로컬 final 직후 /api/translate/finalize 백그라운드 재번역 추가<br/>stop ack 대기시간/드레인 시간을 축소해 재녹음 지연 완화<br/>WS 번역 유실 시에도 final→번역→TTS 연쇄 복구</sub>")

    %% @stop_local_server_final_merge_and_tts_guard [ai-task, closed]
    stop_local_server_final_merge_and_tts_guard("중단 시 중복 발화 병합 + TTS 보장 강화<br/><sub>로컬 final과 후속 서버 final을 동일 발화로 병합 처리<br/>중단 직후 짧은/긴 문장 중복 말풍선 생성 문제 완화<br/>재번역 실패 시 기존 번역 finalized 처리로 TTS 최소 1회 보장</sub>")

    %% @stop_stale_socket_guard_and_final_retranslate [ai-task, closed]
    stop_stale_socket_guard_and_final_retranslate("중단 후 재연결 플리커 방지 + 최종 재번역 강화<br/><sub>stale websocket 이벤트를 무시해 red→orange→red 플리커 차단<br/>병합된 서버 final 텍스트 기준 재번역을 재시도하도록 보강<br/>번역 업데이트 시 같은 발화도 TTS 재큐잉 가능하게 정합성 개선</sub>")

    %% @stop_partial_gate_and_finalize_parser_harden [ai-task, closed]
    stop_partial_gate_and_finalize_parser_harden("중단 구간 partial 차단 + finalize 파서 강화<br/><sub>stopping 상태에서는 partial transcript/translation 이벤트를 무시<br/>중단 직후 partial 재등장으로 인한 중복/미완료 발화 경로 차단<br/>finalize 번역 API JSON 파싱과 응답 형식 안정성 보강</sub>")

    %% @stop_finalize_retry_and_multi_provider_translate [ai-task, closed]
    stop_finalize_retry_and_multi_provider_translate("중단 후 최종 번역 재시도 강화<br/><sub>/api/translate/finalize에 Gemini/OpenAI/Claude 다중 폴백 추가<br/>클라이언트 finalize 번역 호출을 짧은 백오프로 3회 재시도<br/>최종 번역 누락 시에도 기존 번역 finalized 폴백 유지</sub>")

    %% @gaming_socialhero_multilingual_copy_refresh [ai-task, closed]
    gaming_socialhero_multilingual_copy_refresh("Gaming 헤드라인 다국어 개편<br/><sub>gaming Hero 제목 문구를 한국어 기준으로<br/>동시 통역 강조 순서로 재배치하고<br/>중국어/대만어/일본어/베트남어/태국어를<br/>각 로케일에 맞춰 자연스럽게 동기화</sub>")

    %% @tts_echo_reference_filter_research [ai-task, opened]
    tts_echo_reference_filter_research("TTS 출력 음성 STT 유입 방지 고도화 (추후)<br/><sub>단순 suppress 제거 이후 피드백 루프 완화를 위해<br/>출력 참조 기반 에코 제거/ducking/VAD 정책 검토<br/>WebRTC AEC 한계 및 모바일 브라우저별 편차 검증 필요</sub>")

    %% @demo_limit_server_db_migration [ai-task, opened]
    demo_limit_server_db_migration("데모 제한 서버 DB 기반 전환 (추후)<br/><sub>브라우저 localStorage 기준 60초 제한을<br/>서버 DB 세션/지문 기반 제한으로 마이그레이션<br/>우회 방지/멀티디바이스 일관성 정책 설계 필요</sub>")

    %% @ultimate_goal [end, opened]
    ultimate_goal("Mingle Launch<br/><sub>소셜링 중심의 실시간 번역 앱으로<br/>외국인과 깊이 있는 대화를 나누고<br/>지속적인 관계를 만들어가는 서비스</sub>")

    %% === CONNECTIONS ===
    project_start --> structure_refinement
    structure_refinement --> ui_ux_improvement
    ui_ux_improvement --> gladia_stt_integration
    gladia_stt_integration --> language_selection
    language_selection --> mingle_landing_prototype
    mingle_landing_prototype --> landing_i18n
    landing_i18n --> landing_email_mockups
    landing_email_mockups --> landing_ui_refinement
    landing_ui_refinement --> click_analytics
    click_analytics --> nextjs_fullstack_migration
    nextjs_fullstack_migration --> landing_copy_update
    landing_copy_update --> talk_to_world_section
    talk_to_world_section --> gladia_user_onboarding
    gladia_user_onboarding --> deepgram_integration
    deepgram_integration --> fireworks_integration
    fireworks_integration --> deepgram_multi
    deepgram_multi --> deepgram_multi_fix
    deepgram_multi --> gladia_stt_only
    deepgram_multi --> soniox_integration
    deepgram_multi_fix --> translation_engine_research
    gladia_stt_only --> translation_engine_research
    soniox_integration --> cleanup_and_usage_ui
    cleanup_and_usage_ui --> gpt_translation
    gpt_translation --> translation_engine_research
    gpt_translation --> live_phone_demo
    live_phone_demo --> gemini_translation
    gemini_translation --> demo_ux_and_restructure
    demo_ux_and_restructure --> demo_streaming_polish
    demo_streaming_polish --> demo_usage_limit_ux
    demo_usage_limit_ux --> demo_bugfix_db_logging
    demo_bugfix_db_logging --> prisma_local_simplify
    prisma_local_simplify --> stt_server_landing_merge
    stt_server_landing_merge --> railway_stt_deploy
    railway_stt_deploy --> chat_invite_feature
    railway_stt_deploy --> global_stats_fix
    translation_engine_research --> chat_invite_feature
    translation_engine_research --> translator_feature_build
    chat_invite_feature --> mobile_app_development
    chat_invite_feature --> next_i18n_adoption
    chat_invite_feature --> next_auth_adoption
    chat_invite_feature --> instagram_crawling
    chat_invite_feature --> hellotalk_crawling
    next_auth_adoption --> google_oauth_login
    next_i18n_adoption --> mobile_app_development
    google_oauth_login --> mobile_app_development
    translator_feature_build --> mobile_app_development
    mobile_app_development --> capacitor_app_build
    instagram_crawling --> seed_data_population
    hellotalk_crawling --> seed_data_population
    translation_engine_research --> tts_provider_research
    tts_provider_research --> inworld_non_realtime_strategy
    inworld_non_realtime_strategy --> gaming_tts_test_section_spec
    gaming_tts_test_section_spec --> gaming_tts_test_section_apply
    gaming_tts_test_section_apply --> gaming_tts_queue_ui_polish
    gaming_tts_queue_ui_polish --> tts_mobile_lock_recovery
    tts_mobile_lock_recovery --> mobile_tts_autounlock_and_feedback_guard
    mobile_tts_autounlock_and_feedback_guard --> stt_graceful_stop_finalize_flush
    stt_graceful_stop_finalize_flush --> soniox_provider_finalization_on_stop
    soniox_provider_finalization_on_stop --> demo_limit_60s_inworld_tts_rate
    demo_limit_60s_inworld_tts_rate --> tts_stt_concurrent_input_enable
    tts_stt_concurrent_input_enable --> soniox_endpoint_finalize_immediate_tts
    soniox_endpoint_finalize_immediate_tts --> stop_interrupt_local_finalize_fallback
    stop_interrupt_local_finalize_fallback --> stop_dedupe_scope_fix_for_tts_chain
    stop_dedupe_scope_fix_for_tts_chain --> stop_state_and_partial_translation_promote
    stop_state_and_partial_translation_promote --> stop_immediate_finalize_and_translation_drain
    stop_immediate_finalize_and_translation_drain --> forced_termination_finalize_hooks
    forced_termination_finalize_hooks --> stop_fallback_translate_api_and_fast_restart
    stop_fallback_translate_api_and_fast_restart --> stop_local_server_final_merge_and_tts_guard
    stop_local_server_final_merge_and_tts_guard --> stop_stale_socket_guard_and_final_retranslate
    stop_stale_socket_guard_and_final_retranslate --> stop_partial_gate_and_finalize_parser_harden
    stop_partial_gate_and_finalize_parser_harden --> stop_finalize_retry_and_multi_provider_translate
    landing_copy_update --> gaming_socialhero_multilingual_copy_refresh
    stop_finalize_retry_and_multi_provider_translate --> tts_echo_reference_filter_research
    tts_echo_reference_filter_research --> demo_limit_server_db_migration
    demo_limit_server_db_migration --> chat_invite_feature
    seed_data_population --> mobile_app_development
    capacitor_app_build -.-> ultimate_goal
    mobile_app_development -.-> ultimate_goal

    %% === RECENT WORK HIGHLIGHT ===
    subgraph recent [RECENT]
        stop_finalize_retry_and_multi_provider_translate
    end

    %% === STYLES ===
    %% Start node (closed, purple)
    style project_start fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:2px

    %% Ultimate Goal (opened, green)
    style ultimate_goal fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px

    %% Closed tasks (soft purple)
    style structure_refinement fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style ui_ux_improvement fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style gladia_stt_integration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style language_selection fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_landing_prototype fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style landing_i18n fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style landing_email_mockups fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style landing_ui_refinement fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style click_analytics fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style nextjs_fullstack_migration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style landing_copy_update fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style talk_to_world_section fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Blocker node (closed, purple)
    style gladia_user_onboarding fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    style deepgram_integration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    style fireworks_integration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style deepgram_multi fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent nodes (now closed)
    style deepgram_multi_fix fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style gladia_stt_only fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style soniox_integration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style cleanup_and_usage_ui fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style gpt_translation fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style live_phone_demo fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style gemini_translation fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style demo_ux_and_restructure fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style demo_streaming_polish fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style demo_usage_limit_ux fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style demo_bugfix_db_logging fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style prisma_local_simplify fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style stt_server_landing_merge fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style railway_stt_deploy fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Closed recent-complete node
    style global_stats_fix fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Completed tasks in this run
    style translation_engine_research fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_provider_research fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style inworld_non_realtime_strategy fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style chat_invite_feature fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style mobile_app_development fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style next_i18n_adoption fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style next_auth_adoption fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style google_oauth_login fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style capacitor_app_build fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style translator_feature_build fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style seed_data_population fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style instagram_crawling fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    %% Recent node (highlighted purple)
    style gaming_tts_test_section_apply fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style gaming_tts_test_section_spec fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style gaming_tts_queue_ui_polish fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_mobile_lock_recovery fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mobile_tts_autounlock_and_feedback_guard fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_graceful_stop_finalize_flush fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style soniox_provider_finalization_on_stop fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style demo_limit_60s_inworld_tts_rate fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_stt_concurrent_input_enable fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style soniox_endpoint_finalize_immediate_tts fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_interrupt_local_finalize_fallback fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_dedupe_scope_fix_for_tts_chain fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_state_and_partial_translation_promote fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_immediate_finalize_and_translation_drain fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style forced_termination_finalize_hooks fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_fallback_translate_api_and_fast_restart fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_local_server_final_merge_and_tts_guard fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_stale_socket_guard_and_final_retranslate fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_partial_gate_and_finalize_parser_harden fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_finalize_retry_and_multi_provider_translate fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:2px
    style gaming_socialhero_multilingual_copy_refresh fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_echo_reference_filter_research fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style demo_limit_server_db_migration fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style hellotalk_crawling fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px

    %% Blocked subgraph style (red dashed)
    %% Recent subgraph style
    style recent fill:transparent,stroke:#c084fc,color:#c084fc,stroke-width:2px,stroke-dasharray:5 5
