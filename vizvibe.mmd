flowchart TD
    %% === PROJECT GOALS ===
    %% Ultimate Goal: Mingle - 소셜링 중심의 실시간 번역 앱으로 외국인과 깊이 있는 대화 가능하게
    %% Current Goal: Mingle 프리토타입 검증 및 핵심 기능 구현
    %% @lastActive: live_demo_core_demo_logic_split

    %% === START ===
    %% @project_start [start, closed]
    project_start("Next.js Project Start<br/><sub>Mingle 프로젝트의 기반이 되는<br/>Next.js 프레임워크와 기본 구조를<br/>설정하고 초기 환경을 구축함</sub>")

    %% === COMPLETED WORK ===
    %% @structure_refinement [ai-task, closed]
    structure_refinement("Structure & Error Fix<br/><sub>불필요한 폴더 위계를 제거하여<br/>구조를 단순화하고, 클라이언트 컴포넌트<br/>하이드레이션 에러를 해결하여 안정성 확보</sub>")

    %% @ui_ux_improvement [ai-task, closed]
    ui_ux_improvement("UI/UX Improvement<br/><sub>반응형 레이아웃을 적용하여<br/>다양한 화면 크기에서 일관된 경험을<br/>제공하고, 현대적인 감각의 UI로 개선</sub>")

    %% @gladia_stt_integration [ai-task, closed]
    gladia_stt_integration("Gladia STT Integration<br/><sub>Gladia API와 통신하는 Node.js 기반<br/>WebSocket 프록시 서버를 구현하여<br/>실시간 음성 인식을 가능하게 함</sub>")

    %% @language_selection [ai-task, closed]
    language_selection("Language Selection<br/><sub>사용자가 번역할 언어를 직접<br/>선택할 수 있는 기능을 추가하여<br/>다양한 언어권 사용자를 지원함</sub>")

    %% @mingle_landing_prototype [ai-task, closed]
    mingle_landing_prototype("Mingle Landing Page<br/><sub>서비스명 Mingle로 확정하고 소셜링<br/>핵심 가치를 담은 랜딩페이지 프리토타입<br/>React+Vite+Tailwind CSS v4로 구현</sub>")

    %% @landing_i18n [ai-task, closed]
    landing_i18n("Landing i18n 15개 언어<br/><sub>react-i18next로 다국어 지원 구현<br/>EN/KO/JA/ZH/FR/DE/ES/PT/IT/RU<br/>AR/HI/TH/VI 포함, RTL 지원</sub>")

    %% @landing_email_mockups [ai-task, closed]
    landing_email_mockups("이메일 수집 & UI 모킵<br/><sub>다운로드 버튼→이메일 모달 전환<br/>Prisma+PostgreSQL 백엔드 구축<br/>3인 대화 모킵/파티 시나리오/비포애프터 추가</sub>")

    %% @landing_ui_refinement [ai-task, closed]
    landing_ui_refinement("UI 개선 & 테마 변경<br/><sub>다크→라이트 모드, 파란색→노란색 테마<br/>CSS 기반 폰 목업으로 3인 대화 시연<br/>Before/After 3문제-3해결 세로 나열</sub>")

    %% @click_analytics [ai-task, closed]
    click_analytics("클릭 분석 & 유저 추적<br/><sub>버튼 클릭 시 IP/UA/언어/화면크기 등<br/>유저 정보 자동 저장, ButtonClick 모델<br/>이메일 없이도 방문자 행동 추적</sub>")

    %% === COMPLETED WORK (continued) ===
    %% @nextjs_fullstack_migration [ai-task, closed]
    nextjs_fullstack_migration("Next.js 풀스택 전환<br/><sub>mingle-landing을 Vite+Express에서<br/>Next.js App Router로 마이그레이션<br/>Vercel 배포, 방문자/클릭 추적, 다국어 라우팅</sub>")

    %% @landing_copy_update [ai-task, closed]
    landing_copy_update("랜딩 카피 전면 개편<br/><sub>15개 언어 hero/problem/features/coreValue<br/>문구 업데이트, 대화 끊김 없는 번역 강조<br/>4번째 문제점 추가, 불필요한 배지 삭제</sub>")

    %% @talk_to_world_section [ai-task, closed]
    talk_to_world_section("Talk to the World 섹션<br/><sub>사용 방법→글로벌 연결 섹션 교체<br/>15개 언어 번역, 전체너비 이미지 배치<br/>favicon 설정 완료</sub>")

    %% @gladia_user_onboarding [blocker, closed]
    gladia_user_onboarding("Gladia 유저 온보딩<br/><sub>Gladia 온보딩 500 에러로 신규 가입 불가<br/>버튼 코드 제거 완료, 서버 버그 해결 시<br/>재구현 필요 (key 중복 버그도 수정됨)</sub>")

    %% @deepgram_integration [ai-task, closed]
    deepgram_integration("Deepgram 통합 & UI 개선<br/><sub>Nova-3 모델 적용(단일언어 최적화)<br/>Detect Language 에러 해결 및<br/>자동 스크롤 기능 추가완료</sub>")

    %% @fireworks_integration [ai-task, closed]
    fireworks_integration("Fireworks AI 통합<br/><sub>Whisper 기반 V2 모델 연동 완료<br/>48kHz 샘플레이트 지원 패치<br/>다중 모델 선택 아키텍처 구축</sub>")

    %% @deepgram_multi [ai-task, closed]
    deepgram_multi("Deepgram Multi 모드 추가<br/><sub>language=multi 파라미터로 다국어<br/>코드 스위칭 전사 모드 추가<br/>기존 단일언어 모드와 별도 메뉴로 구성</sub>")

    %% @deepgram_multi_fix [ai-task, closed]
    deepgram_multi_fix("Deepgram Multi 언어감지 수정<br/><sub>detected_language→words[0].language<br/>+ channel.languages 폴백으로 변경<br/>지원 언어 10개 안내 UI 추가</sub>")

    %% @gladia_stt_only [ai-task, closed]
    gladia_stt_only("Gladia STT 전용 옵션<br/><sub>번역 없이 순수 STT만 사용하는<br/>옵션 추가, enableTranslation 파라미터로<br/>번역 on/off 제어</sub>")

    %% @soniox_integration [ai-task, closed]
    soniox_integration("Soniox V4 실시간 STT 통합<br/><sub>stt-rt-v4 모델 WebSocket 연동<br/>60+ 언어 자동 감지, 발화자 분리 지원<br/>디폴트 모델로 설정, 사용량 로깅 추가</sub>")

    %% @cleanup_and_usage_ui [ai-task, closed]
    cleanup_and_usage_ui("로그 제거 & 사용량 UI<br/><sub>서버/클라이언트 console.log 전부 제거<br/>Soniox 오디오 사용량을 WebSocket으로<br/>클라이언트 전달, 세션/누적 사용량 UI 표시</sub>")

    %% @gpt_translation [ai-task, closed]
    gpt_translation("AI 번역 통합 (모델 선택)<br/><sub>Claude Haiku 4.5 / GPT-5-nano 선택 가능<br/>모든 STT 프로바이더에 번역 적용<br/>Soniox language_hints_strict 토글 UI</sub>")

    %% @translation_engine_research [ai-task, closed]
    translation_engine_research("번역 기능 고도화<br/><sub>Deepgram/Fireworks는 번역 미지원<br/>별도 번역 엔진(GPT/DeepL 등)을<br/>붙이는 파이프라인 구축 필요</sub>")

    %% @live_phone_demo [ai-task, closed]
    live_phone_demo("랜딩 라이브 폰 데모<br/><sub>hero 정적 이미지를 CSS 스마트폰 프레임<br/>+ 실시간 STT 채팅 UI로 교체<br/>마이크 버튼으로 직접 체험 가능</sub>")

    %% @gemini_translation [ai-task, closed]
    gemini_translation("Gemini 번역 모델 추가<br/><sub>Gemini 2.5 Flash Lite / 3 Flash Preview<br/>번역 모델 추가, 데모는 Gemini Lite 사용<br/>@google/generative-ai SDK 연동</sub>")

    %% @demo_ux_and_restructure [ai-task, closed]
    demo_ux_and_restructure("데모 UX 개선 & 폴더 정리<br/><sub>폰 데모 반응형/노치/에러처리 개선<br/>hero에 번역기 테스트 버튼 추가<br/>레포를 mingle-landing + mingle-model-test로 분리</sub>")

    %% @demo_streaming_polish [ai-task, closed]
    demo_streaming_polish("스트리밍 번역 & UI 폴리시<br/><sub>부분 번역 ~2초 스트리밍, 국기 이모지 pill<br/>iPhone 녹음 인디케이터, bouncing dots<br/>기본언어 EN/KO/JA, Gemini Lite 기본값</sub>")

    %% @demo_usage_limit_ux [ai-task, closed]
    demo_usage_limit_ux("데모 사용량 제한 & UX 개선<br/><sub>30초/브라우저 사용량 제한 + 얼리액세스 모달<br/>언어 선택 드롭다운(최대5개), localStorage 영속성<br/>부분 번역 bouncing dots, 노치 확대, i18n 완성</sub>")

    %% @demo_bugfix_db_logging [ai-task, closed]
    demo_bugfix_db_logging("버그 수정 & 대화 DB 적재<br/><sub>React Strict Mode 중복 말풍선 수정<br/>대화록 DB 저장(번역 포함), 사용량 프로그레스바<br/>30초 제한 i18n, iPad 여백, Prisma directUrl</sub>")

    %% @prisma_local_simplify [ai-task, closed]
    prisma_local_simplify("Prisma 로컬 DB 단순화<br/><sub>prisma dev 임베디드 postgres → Homebrew PG14<br/>prisma+postgres:// 프록시 제거, 포트 5432<br/>directUrl 제거, Studio 안정 작동</sub>")

    %% @stt_server_landing_merge [ai-task, closed]
    stt_server_landing_merge("STT 서버 랜딩 통합<br/><sub>stt-server.ts를 mingle-landing으로 이동<br/>pnpm dev로 Next.js+STT 동시 실행<br/>WS URL 동적 hostname 지원</sub>")

    %% @railway_stt_deploy [ai-task, closed]
    railway_stt_deploy("Railway STT 서버 배포<br/><sub>stt-server.ts Railway 배포 설정<br/>railway.json, PORT 환경변수 대응<br/>Vercel+Railway 분리 아키텍처 구성</sub>")

    %% @global_stats_fix [ai-task, closed]
    global_stats_fix("Global Stats Mobile Fix<br/><sub>Social 버전 숫자 통계에서 + 기호 제거<br/>모바일 뷰에서 짤리는 문제 해결<br/>10M/100/120으로 표시 수정</sub>")

    %% @chat_invite_feature [ai-task, closed]
    chat_invite_feature("대화록 초대 기능<br/><sub>번역된 대화를 채팅방으로 저장하고<br/>상대방을 초대하여 헤어진 후에도<br/>연락을 이어갈 수 있는 핵심 기능</sub>")

    %% @mobile_app_development [ai-task, closed]
    mobile_app_development("Cross-Platform Mobile App<br/><sub>React Native 등을 활용하여 실시간<br/>연속 번역 기능을 탑재한 크로스<br/>플랫폼 모바일 애플리케이션 개발</sub>")

    %% @next_i18n_adoption [ai-task, closed]
    next_i18n_adoption("Next i18n 적용<br/><sub>Next.js 앱 라우팅에 다국어 구조를 적용하고<br/>번역 리소스/로케일 미들웨어를 정리해<br/>확장 가능한 국제화 기반을 구축</sub>")

    %% @next_auth_adoption [ai-task, closed]
    next_auth_adoption("NextAuth 적용<br/><sub>세션/인증 공통 레이어를 도입하여<br/>서버/클라이언트 인증 흐름을 통합하고<br/>보호 라우트 정책을 정비</sub>")

    %% @google_oauth_login [ai-task, closed]
    google_oauth_login("구글 로그인 적용<br/><sub>Google OAuth Provider를 연결하여<br/>소셜 로그인 진입을 구현하고<br/>계정 연동/세션 유지 시나리오를 검증</sub>")

    %% @capacitor_app_build [ai-task, closed]
    capacitor_app_build("Capacitor 앱 빌드 검증<br/><sub>웹 앱을 Capacitor로 패키징하여<br/>iOS/Android 네이티브 빌드 파이프라인과<br/>런타임 동작 가능성을 점검</sub>")

    %% @translator_feature_build [ai-task, closed]
    translator_feature_build("번역기 기능 구현<br/><sub>입력/감지/번역/출력까지 end-to-end<br/>번역 UX를 구성하고 실시간 대화 흐름에<br/>맞는 파이프라인을 완성</sub>")

    %% @seed_data_population [ai-task, closed]
    seed_data_population("시드 데이터 채워넣기<br/><sub>개발/테스트용 초기 데이터를 설계하고<br/>언어/유저/대화 샘플을 DB에 적재해<br/>기능 검증 속도를 높임</sub>")

    %% @instagram_crawling [ai-task, closed]
    instagram_crawling("인스타 크롤링 기능<br/><sub>타깃 데이터 수집 범위와 정책을 정의하고<br/>수집/정제 파이프라인을 구현해<br/>후속 분석 및 데이터 구축에 활용</sub>")

    %% @hellotalk_crawling [ai-task, closed]
    hellotalk_crawling("헬로톡 크롤링 기능<br/><sub>언어교환 도메인 데이터 수집 파이프라인을<br/>설계/구현하고 데이터 품질 기준을 정해<br/>시드/추천 실험에 활용</sub>")

    %% @tts_provider_research [ai-task, closed]
    tts_provider_research("TTS 프로바이더 리서치/비교<br/><sub>실시간/비실시간 후보군 가격을 시간당으로 통일<br/>언어수/스트리밍 여부/데모 유무 비교 완료<br/>Inworld 중심 도입 방향으로 정리</sub>")

    %% @inworld_non_realtime_strategy [ai-task, closed]
    inworld_non_realtime_strategy("Inworld 비실시간 전략 확정<br/><sub>번역 확정 후 TTS 합성으로 1차 구현<br/>레이턴시 이슈 시 실시간 스트리밍으로 전환<br/>voiceId/언어코드 매핑 조사 완료</sub>")

    %% @gaming_tts_test_section_spec [ai-task, closed]
    gaming_tts_test_section_spec("Gaming 테스트 섹션 TTS 스펙 확정<br/><sub>입력: 번역 확정 텍스트 + 대상 언어<br/>출력: Inworld 합성 음성 재생/중단/오류 처리<br/>기본 voiceId 매핑 정책 정의</sub>")

    %% @gaming_tts_test_section_apply [ai-task, closed]
    gaming_tts_test_section_apply("Gaming 테스트 섹션 TTS 적용 (mingle-landing)<br/><sub>Inworld API Route + 첫 번역문 자동 재생 연결<br/>언어별 voice fallback 및 mini 모델 기본값 반영<br/>로컬 .env 인증키(fallback alias) 지원</sub>")

    %% @gaming_tts_queue_ui_polish [ai-task, closed]
    gaming_tts_queue_ui_polish("Gaming TTS 큐 안정화 & 재생 UI 표시<br/><sub>자동 데모 재생 구간에서는 TTS 비활성화<br/>유저 테스트 시작 후에만 TTS arm 처리<br/>final 번역 기준 큐 + 재생중 말풍선 음파 인디케이터 추가</sub>")

    %% @tts_mobile_lock_recovery [ai-task, closed]
    tts_mobile_lock_recovery("모바일 잠금/복귀 TTS 복구<br/><sub>iOS 잠금 해제 후 TTS 무음 상태 대응<br/>visibilitychange 재시도 + blocked 항목 큐 복원<br/>Enable Sound 버튼으로 수동 언락 후 재생 재개</sub>")

    %% @mobile_tts_autounlock_and_feedback_guard [ai-task, closed]
    mobile_tts_autounlock_and_feedback_guard("모바일 TTS 자동 언락 + 피드백 루프 완화<br/><sub>Enable Sound UI 제거, 사용자 제스처로 자동 언락 재시도<br/>TTS 재생 중 STT 오디오 업링크 잠시 suppress 처리<br/>getUserMedia echo/noise suppression 제약 강화</sub>")

    %% @stt_graceful_stop_finalize_flush [ai-task, closed]
    stt_graceful_stop_finalize_flush("STT 중단 시 강제 확정 + 번역/TTS 플러시<br/><sub>녹음 중지는 mic 업링크만 즉시 중단<br/>pending partial을 final 턴으로 확정 후 번역 완료까지 대기<br/>ack 후 소켓 종료로 중도 유실 완화(30초 제한 포함)</sub>")

    %% @soniox_provider_finalization_on_stop [ai-task, closed]
    soniox_provider_finalization_on_stop("Soniox 상태기반 종료 확정 처리<br/><sub>stop_recording 시 클라이언트 pending 텍스트 대신<br/>Soniox 서버 상태(finalized+non-final) 기준으로 final 확정<br/>ack 이후 클라이언트/서버 WS 순차 종료로 정합성 강화</sub>")

    %% @demo_limit_60s_inworld_tts_rate [ai-task, closed]
    demo_limit_60s_inworld_tts_rate("데모 제한 60초 + Inworld 말하기 속도 조정<br/><sub>테스트 섹션 사용 제한을 30초→60초로 확장<br/>i18n 제한 문구를 전 언어에서 60초로 동기화<br/>Inworld TTS audioConfig.speakingRate 기본값 1.2 적용</sub>")

    %% @tts_stt_concurrent_input_enable [ai-task, closed]
    tts_stt_concurrent_input_enable("TTS 재생 중 STT 동시 입력 허용<br/><sub>TTS 재생 상태와 연동된 STT 업링크 suppress 로직 제거<br/>TTS 출력 중에도 마이크 입력을 Soniox로 지속 전송<br/>브라우저 echo/noise suppression 기본 제약은 유지</sub>")

    %% @soniox_endpoint_finalize_immediate_tts [ai-task, closed]
    soniox_endpoint_finalize_immediate_tts("Soniox 엔드포인트 즉시 확정 처리<br/><sub><end> 토큰 감지 시 발화를 즉시 final로 확정<br/>번역 완료 직후 TTS 큐가 즉시 실행되도록 연결<br/>테스트 종료 시점까지 지연되던 발화 케이스 완화</sub>")

    %% @stop_interrupt_local_finalize_fallback [ai-task, closed]
    stop_interrupt_local_finalize_fallback("중단 시 partial 로컬 강제 확정 폴백<br/><sub>stop_recording ack 지연/유실 시 남은 partial을 클라이언트에서 final 승격<br/>중단 후 partial 말풍선 잔류를 제거하고 번역 연계를 안정화<br/>ack 대기시간/지연 close 보강으로 stop 레이스 완화</sub>")

    %% @stop_dedupe_scope_fix_for_tts_chain [ai-task, closed]
    stop_dedupe_scope_fix_for_tts_chain("중단 중복제거 범위 축소 (TTS 체인 복원)<br/><sub>global final dedupe를 stop 전용 dedupe로 축소<br/>세션 재시작 직후 발화가 dedupe로 누락되던 케이스 완화<br/>final→번역→TTS 연쇄가 재시작 후에도 이어지도록 보정</sub>")

    %% @stop_state_and_partial_translation_promote [ai-task, closed]
    stop_state_and_partial_translation_promote("중단 상태 UI 분리 + partial 번역 승격<br/><sub>stop 클릭 즉시 stopping 상태로 전환해 red 녹음 표시 해제<br/>로컬 강제 확정 시 partial 번역을 finalized로 승격<br/>ack 지연 시에도 final→TTS 체인이 끊기지 않도록 보강</sub>")

    %% @stop_immediate_finalize_and_translation_drain [ai-task, closed]
    stop_immediate_finalize_and_translation_drain("중단 즉시 final 확정 + 번역 드레인 대기<br/><sub>stop 시 partial을 즉시 final 승격해 지연 체감 제거<br/>ack timeout 구간에는 짧은 translation drain 대기 추가<br/>final 텍스트 기준 번역 업데이트 후 TTS 체인 복구</sub>")

    %% @forced_termination_finalize_hooks [ai-task, closed]
    forced_termination_finalize_hooks("강제 종료 이벤트 finalizing 훅 추가<br/><sub>1분 제한/오프라인/pagehide/visibilitychange에서 stop 트리거<br/>소켓 error/close 시 partial 로컬 확정 폴백 추가<br/>사용자 stop 외 종료에도 final→번역→TTS 체인 보존 강화</sub>")

    %% @stop_fallback_translate_api_and_fast_restart [ai-task, closed]
    stop_fallback_translate_api_and_fast_restart("중단 후 번역 API 폴백 + 재시작 지연 단축<br/><sub>로컬 final 직후 /api/translate/finalize 백그라운드 재번역 추가<br/>stop ack 대기시간/드레인 시간을 축소해 재녹음 지연 완화<br/>WS 번역 유실 시에도 final→번역→TTS 연쇄 복구</sub>")

    %% @stop_local_server_final_merge_and_tts_guard [ai-task, closed]
    stop_local_server_final_merge_and_tts_guard("중단 시 중복 발화 병합 + TTS 보장 강화<br/><sub>로컬 final과 후속 서버 final을 동일 발화로 병합 처리<br/>중단 직후 짧은/긴 문장 중복 말풍선 생성 문제 완화<br/>재번역 실패 시 기존 번역 finalized 처리로 TTS 최소 1회 보장</sub>")

    %% @stop_stale_socket_guard_and_final_retranslate [ai-task, closed]
    stop_stale_socket_guard_and_final_retranslate("중단 후 재연결 플리커 방지 + 최종 재번역 강화<br/><sub>stale websocket 이벤트를 무시해 red→orange→red 플리커 차단<br/>병합된 서버 final 텍스트 기준 재번역을 재시도하도록 보강<br/>번역 업데이트 시 같은 발화도 TTS 재큐잉 가능하게 정합성 개선</sub>")

    %% @stop_partial_gate_and_finalize_parser_harden [ai-task, closed]
    stop_partial_gate_and_finalize_parser_harden("중단 구간 partial 차단 + finalize 파서 강화<br/><sub>stopping 상태에서는 partial transcript/translation 이벤트를 무시<br/>중단 직후 partial 재등장으로 인한 중복/미완료 발화 경로 차단<br/>finalize 번역 API JSON 파싱과 응답 형식 안정성 보강</sub>")

    %% @stop_finalize_retry_and_multi_provider_translate [ai-task, closed]
    stop_finalize_retry_and_multi_provider_translate("중단 후 최종 번역 재시도 강화<br/><sub>/api/translate/finalize에 Gemini/OpenAI/Claude 다중 폴백 추가<br/>클라이언트 finalize 번역 호출을 짧은 백오프로 3회 재시도<br/>최종 번역 누락 시에도 기존 번역 finalized 폴백 유지</sub>")

    %% @stop_ack_server_final_turn_payload [ai-task, closed]
    stop_ack_server_final_turn_payload("중단 ACK에 서버 최종 번역 payload 포함<br/><sub>stop_recording_ack에 final_turn(원문+번역)을 함께 전달<br/>클라이언트는 /api/translate/finalize 의존 없이 ACK payload를 우선 반영<br/>중단 시 final→번역→TTS 체인을 서버 응답 기준으로 안정화</sub>")

    %% @stop_translation_json_and_single_fallback [ai-task, closed]
    stop_translation_json_and_single_fallback("중단 직후 번역 누락 보강 (JSON+단일언어 폴백)<br/><sub>서버 번역 JSON 파서에 fenced/sliced 복원 파싱 추가<br/>Gemini JSON 응답 강제(responseMimeType) 및 재시도 적용<br/>final 번역 누락 시 언어별 단일 번역 폴백으로 번역 공백 최소화</sub>")

    %% @gaming_socialhero_multilingual_copy_refresh [ai-task, closed]
    gaming_socialhero_multilingual_copy_refresh("Gaming 헤드라인 다국어 개편<br/><sub>gaming Hero 제목 문구를 한국어 기준으로<br/>동시 통역 강조 순서로 재배치하고<br/>중국어/대만어/일본어/베트남어/태국어를<br/>각 로케일에 맞춰 자연스럽게 동기화</sub>")

    %% @translation_decouple_http [ai-task, closed]
    translation_decouple_http("번역 탈WebSocket → HTTP API 전환<br/><sub>STT 서버에서 번역 로직 전체 제거(~200줄)<br/>클라이언트가 /api/translate/finalize 직접 호출<br/>5글자 partial 번역, utteranceId 바인딩 오염 차단<br/>소리 토글 버튼 추가, 번역 표시 순서 고정</sub>")

    %% @finalize_inline_tts_bundle [ai-task, closed]
    finalize_inline_tts_bundle("파이널라이즈 번역+TTS 동시 처리<br/><sub>/api/translate/finalize가 tts.language를 받아<br/>번역 완료 직후 Inworld TTS를 즉시 호출하고<br/>번역 결과와 base64 오디오를 함께 내려<br/>클라이언트 왕복 지연 1회를 제거</sub>")

    %% @finalize_tts_double_playback_rootcause [ai-task, closed]
    finalize_tts_double_playback_rootcause("파이널라이즈 TTS 2회 재생 원인 확인<br/><sub>인라인 TTS 수신 시 spoken 시그니처를<br/>language::__server_tts__로 저장하지만<br/>후속 effect는 language::translatedText와 비교해<br/>/api/tts/inworld 재요청이 다시 큐잉됨</sub>")

    %% @finalize_tts_dedupe_alignment_fix [ai-task, closed]
    finalize_tts_dedupe_alignment_fix("클라 Inworld 후속 TTS 호출 제거 완료<br/><sub>LivePhoneDemo의 effect 기반 후속 TTS 큐를 삭제하고<br/>/api/tts/inworld 클라이언트 재요청 경로를 완전히 제거<br/>파이널라이즈는 서버 인라인 ttsAudio만 즉시 재생하도록<br/>TTS 실행 경로를 단일화해 중복 재생을 차단</sub>")

    %% @finalize_translate_first_tts_split [ai-task, closed]
    finalize_translate_first_tts_split("번역 우선 응답 + TTS 별도 호출 전환<br/><sub>/api/translate/finalize에서 인라인 TTS 병합을 제거해<br/>번역 결과를 먼저 즉시 응답하도록 경로를 단순화하고<br/>클라 훅은 번역 반영 후 /api/tts/inworld를 별도 호출해<br/>서버 경유 TTS를 1회만 실행하도록 재구성</sub>")

    %% @tts_global_queue_sequential_playback [ai-task, closed]
    tts_global_queue_sequential_playback("TTS 글로벌 큐 순차 재생 적용<br/><sub>인라인 TTS 응답을 도착 순서대로 큐잉하고<br/>재생 중인 음성을 중간에 끊지 않도록 보장해<br/>현재 음성 종료 후 다음 음성을 이어 재생하는<br/>단일 플레이백 루프로 발화 끊김을 제거</sub>")

    %% @tts_priority_queue_ordering [ai-task, closed]
    tts_priority_queue_ordering("TTS 메시지 순서 우선순위 큐 적용<br/><sub>응답 도착 순서가 역전되어도 utterance 순서를 기준으로<br/>앞선 발화 오디오를 우선 재생하도록 큐 우선순위를 재정렬<br/>선행 오디오 미도착 시 짧게 대기 후 타임아웃 스킵을 허용해<br/>순서 보장과 무한 대기 방지를 동시에 만족</sub>")

    %% @ios_chrome_audio_player_reuse [ai-task, closed]
    ios_chrome_audio_player_reuse("iOS Chrome 무음 대응 재생기 교체<br/><sub>TTS payload를 data URL 대신 Blob으로 전달하고<br/>재생 시 단일 HTMLAudioElement를 계속 재사용해<br/>사용자 제스처 언락 상태를 동일 플레이어에 유지하고<br/>iOS 브라우저별 자동재생 차단 케이스를 완화</sub>")

    %% @ios_safari_lock_resume_recovery [ai-task, closed]
    ios_safari_lock_resume_recovery("iOS 잠금복귀 TTS 회복 로직 강화<br/><sub>visibilitychange 외 pageshow/focus 복귀 훅을 추가해<br/>잠금 해제 후 자동 재개 시도를 다중 트리거로 보강하고<br/>재생 차단 시 BLOCKED 상태를 유지한 채 큐를 보존하며<br/>Resume Audio 버튼으로 사용자 제스처 재개 경로를 제공</sub>")

    %% @mingle_app_test_section_migration [ai-task, closed]
    mingle_app_test_section_migration("mingle-app 테스트 섹션 이식<br/><sub>mingle-landing의 최신 LivePhoneDemo 컴포넌트와<br/>/api/translate/finalize + /api/tts/inworld 서버 경유 경로를<br/>mingle-app /[locale]/translator 페이지에 통합해<br/>동일한 STT→번역→TTS 테스트 플로우를 구성</sub>")

    %% @landing_inline_tts_reenable [ai-task, closed]
    landing_inline_tts_reenable("landing 서버 인라인 TTS 재활성화<br/><sub>finalize 번역 API에 tts.language 입력을 다시 연결해<br/>번역 완료 즉시 서버가 Inworld TTS를 호출하고<br/>번역+TTS 오디오(base64)를 한 응답으로 반환하도록<br/>클라이언트 후속 /api/tts/inworld RTT를 제거</sub>")

    %% @tts_queue_race_retrigger_fix [ai-task, closed]
    tts_queue_race_retrigger_fix("TTS 큐 타이밍 레이스 재트리거 보강<br/><sub>inline TTS 도착이 번역 state 커밋보다 빠를 때<br/>첫 발화가 큐에서 누락되어 지연되던 경로를 추적해<br/>utterances 커밋 이후 pending 오디오가 있으면<br/>processTtsQueue를 재호출하도록 트리거를 추가</sub>")

    %% @stt_background_stop_policy_update [ai-task, closed]
    stt_background_stop_policy_update("STT 백그라운드 중단 정책 조정<br/><sub>잠금/백그라운드/pagehide 이벤트에서<br/>stopRecordingGracefully를 호출하던 경로를 제거하고<br/>네트워크 offline 이벤트에서만 STT 중단을 유지해<br/>모바일 화면 잠금 시 녹취가 즉시 끊기지 않게 보정</sub>")

    %% @stt_background_auto_recovery [ai-task, closed]
    stt_background_auto_recovery("잠금 복귀 후 STT 자동 복구 추가<br/><sub>visibility/pageshow/focus 복귀 이벤트에서<br/>AudioContext/track/chunk 흐름을 점검하고<br/>중단 상태가 감지되면 세션을 자동 stop→start해<br/>빨간 녹취 상태 잔류와 무음 입력 정체를 복구</sub>")

    %% @stt_lock_resume_reconnect_removal [ai-task, closed]
    stt_lock_resume_reconnect_removal("잠금 복귀 강제 재연결 로직 제거<br/><sub>잠금/백그라운드 복귀 시 실행되던<br/>STT 자동 stop→start 복구 경로를 제거해<br/>화면 잠금 자체가 세션 재연결 트리거가 되지 않도록<br/>오직 사용자 중지/offline/데모 제한에서만 종료 유지</sub>")

    %% @stt_mic_button_tts_decouple [ai-task, closed]
    stt_mic_button_tts_decouple("마이크 버튼의 STT 전용 제어 보장<br/><sub>마이크 클릭 시 오디오 프라임을 항상 실행하던 경로를<br/>STT 시작(idle→recording) 상황에서만 수행하도록 변경해<br/>녹취 종료 클릭이 진행 중 TTS 플레이어 src를 덮어써<br/>재생을 끊던 사이드이펙트를 제거</sub>")

    %% @tts_queue_watchdog_and_start_prime_guard [ai-task, closed]
    tts_queue_watchdog_and_start_prime_guard("TTS 큐 독립 재시도 + 시작 프라임 보강<br/><sub>inline 오디오 도착 후 트리거 누락 시를 대비해<br/>pending 큐를 짧은 주기로 재평가하는 watchdog을 추가하고<br/>마이크 시작 제스처(pointerdown/click)에서만 프라임하며<br/>재생 중 플레이어는 건드리지 않도록 인터럽트 가드 적용</sub>")

    %% @tts_prime_failure_volume_recovery_fix [ai-task, closed]
    tts_prime_failure_volume_recovery_fix("프라임 실패 시 볼륨 복구 보장<br/><sub>silent priming 도중 play() 실패가 발생하면<br/>공유 오디오 플레이어 volume이 0으로 남아<br/>TTS가 작게 들리거나 무음처럼 보이던 경로를<br/>실패 처리에서 volume/src를 즉시 복구하도록 수정</sub>")

    %% @stt_lock_resume_reconnect_restore_and_stop_click_tts_resume [ai-task, closed]
    stt_lock_resume_reconnect_restore_and_stop_click_tts_resume("잠금 복귀 재연결 복원 + 종료클릭 TTS 재개 보강<br/><sub>잠금 복귀 후 빨간 상태 고착 이슈 대응을 위해<br/>STT 자동 복구(stop→start) 경로를 다시 활성화하고<br/>STT 종료 버튼 클릭 제스처에서 TTS 재생 재개를<br/>즉시+지연 재시도해 재생 끊김을 완화하도록 조정</sub>")

    %% @stt_stop_pipeline_without_output_close [ai-task, closed]
    stt_stop_pipeline_without_output_close("STT 중지 시 출력 오디오 세션 보존<br/><sub>STT 정지에서 AudioContext를 close하던 경로를<br/>suspend 기반으로 변경하고 context 재사용을 도입해<br/>마이크 종료 시점에 iOS 출력 경로가 흔들리며<br/>TTS 재생이 끊기던 현상을 완화하도록 조정</sub>")

    %% @mingle_app_landing_test_section_rebase [ai-task, closed]
    mingle_app_landing_test_section_rebase("mingle-app 테스트 섹션 원본 재이식<br/><sub>mingle-landing 테스트 섹션 최신 코드를<br/>LivePhoneDemo/useRealtimeSTT와 번역/TTS API에<br/>원본 기준으로 다시 동기화하고 폰 프레임을 제거해<br/>앱 전역 480px 모바일 캔버스 스케일을 적용</sub>")

    %% @mingle_app_fullscreen_test_surface [ai-task, closed]
    mingle_app_fullscreen_test_surface("테스트 UI 풀스크린 정렬<br/><sub>mingle-home의 상단 안내/CTA를 제거하고<br/>LivePhoneDemo만 단독으로 렌더링해<br/>화면 전체가 테스트 앱 UI를 쓰도록 정리<br/>하단 마이크 버튼만 시작 진입점으로 유지</sub>")

    %% @mingle_app_remove_mock_statusbar [ai-task, closed]
    mingle_app_remove_mock_statusbar("가짜 상태바/노치 요소 제거<br/><sub>LivePhoneDemo 상단의 시간/신호/배터리<br/>모사 UI 블록을 제거해 테스트폰 느낌을 없애고<br/>실제 테스트 화면 본문만 바로 보이도록 정렬<br/>헤더부터 콘텐츠가 시작되는 구조로 단순화</sub>")

    %% @mingle_app_client_only_live_demo [ai-task, closed]
    mingle_app_client_only_live_demo("Live demo 하이드레이션 가드 적용<br/><sub>서버/클라이언트 초기 상태 차이로 발생하던<br/>Hydration mismatch 경고를 막기 위해<br/>mingle-home에서 LivePhoneDemo를<br/>dynamic ssr:false로 클라이언트 전용 렌더링</sub>")

    %% @mingle_app_favicon_sync [ai-task, closed]
    mingle_app_favicon_sync("mingle-app favicon 랜딩과 동기화<br/><sub>mingle-landing의 app/favicon.ico 파일을<br/>mingle-app src/app/favicon.ico에 복사해<br/>브라우저 탭 아이콘을 랜딩과 동일 리소스로<br/>일관되게 보이도록 에셋 기준을 통일</sub>")

    %% @mingle_app_global_scroll_lock [ai-task, closed]
    mingle_app_global_scroll_lock("전역 스크롤 잠금 + 내부 스크롤 한정<br/><sub>scale 캔버스와 minHeight 조합으로 생기던<br/>루트 스크롤바 토글/좌우 딸깍 현상을 추적해<br/>html/body/stage/frame overflow를 hidden으로 고정하고<br/>채팅 리스트 영역만 overflow-y-auto로 유지</sub>")

    %% @mingle_app_under480_fullwidth_scale_shell [ai-task, closed]
    mingle_app_under480_fullwidth_scale_shell("480 이하 전폭 사용 스케일 셸 보정<br/><sub>transform 스케일만 적용되던 기존 구조에서<br/>레이아웃 폭(480)과 시각 폭이 달라 보이던 문제를<br/>stage→shell→frame 2단 구조로 분리해<br/>480 이하에서 shell 폭을 viewport와 1:1로 정렬</sub>")

    %% @mingle_app_top_level_scale_only [ai-task, closed]
    mingle_app_top_level_scale_only("최상위 단일 스케일 구조로 정리<br/><sub>PhoneFrame 내부의 480 maxWidth 제한을 제거해<br/>컴포넌트 단위 폭 제약을 없애고<br/>모바일 비율/폭 제어 책임을 mobile-canvas-shell<br/>최상위 레벨 한 곳으로 단일화</sub>")

    %% @mingle_app_fixed_footer_via_svh_and_flex_constraints [ai-task, closed]
    mingle_app_fixed_footer_via_svh_and_flex_constraints("하단탭 고정 레이아웃 안정화<br/><sub>dvh 변동으로 하단탭이 따라 움직이던 경로를<br/>svh 기반 높이 체계로 전환해 흔들림을 완화하고<br/>header/footer를 shrink-0으로 고정, chat만 min-h-0<br/>내부 스크롤로 남겨 하단탭 위치를 일관되게 유지</sub>")

    %% @mingle_app_footer_bottom_anchor_with_frame_height_inheritance [ai-task, closed]
    mingle_app_footer_bottom_anchor_with_frame_height_inheritance("하단탭 최하단 앵커 보정<br/><sub>메인 컨테이너를 100svh 고정에서 h-full 상속으로 바꿔<br/>스케일된 frameHeight 전체를 실제 레이아웃 높이로 사용하고<br/>가로 폭 축소 시에도 footer가 캔버스 최하단에 붙도록<br/>상대 배율 변경과 무관한 고정 하단 위치를 유지</sub>")

    %% @shared_live_demo_core_package_split [ai-task, closed]
    shared_live_demo_core_package_split("라이브 데모 코어 패키지 분리<br/><sub>mingle-landing 최신 useRealtimeSTT/ChatBubble/LanguageSelector를<br/>packages/live-demo-core로 추출해 단일 소스로 관리하고<br/>landing/app 모두 로컬 래퍼를 통해 공통 패키지를 참조하도록<br/>연결해 UI 분기와 코어 로직 분리를 동시에 달성</sub>")

    %% @mingle_app_remove_60s_usage_limit [ai-task, closed]
    mingle_app_remove_60s_usage_limit("mingle-app 60초 제한 해제<br/><sub>공통 useRealtimeSTT 훅에 usageLimitSec 옵션을 추가해<br/>기본값 60초는 landing에 유지하고 app 래퍼에서 null 주입<br/>앱 UI는 제한 진행바/잔여초 대신 경과 시간 표시로 전환해<br/>제한 없는 녹음 흐름과 표시 정합성을 맞추도록 보정</sub>")

    %% @mingle_app_ios_scaffold [ai-task, closed]
    mingle_app_ios_scaffold("mingle-app iOS 래핑 스캐폴드 생성<br/><sub>Capacitor iOS 네이티브 프로젝트를 신규 생성하고<br/>웹 번들을 capacitor-web로 빌드/복사해 동기화 완료<br/>ios/App/App/public 및 Package.swift 플러그인 구성을<br/>현재 웹 코드 기준으로 정합되게 초기 세팅</sub>")

    %% @live_demo_core_demo_logic_split [ai-task, closed]
    live_demo_core_demo_logic_split("live-demo-core 데모 로직 분리<br/><sub>공통 useRealtimeSTT에서 초기 3개 예시/타이핑 애니메이션을 제거하고<br/>localStorage 기반 utterances/usage 저장 정책은 코어에 유지<br/>landing 래퍼 훅에서만 데모 시드/애니메이션을 담당하도록 재배치해<br/>app은 공통 코어만 사용하고 랜딩 전용 UX를 분리</sub>")

    %% @xcode_install_and_ios_device_build [human-task, opened]
    xcode_install_and_ios_device_build("Xcode 설치 후 실기기 빌드 진행<br/><sub>App Store CLI로 Xcode 식별/설치 시도는 확인됐지만<br/>관리자 비밀번호 입력 단계에서 자동 진행이 중단됨<br/>로컬 관리자 인증으로 Xcode 설치를 완료한 뒤<br/>xcodebuild/디바이스 런을 이어서 최종 검증 필요</sub>")

    %% @tts_echo_reference_filter_research [ai-task, opened]
    tts_echo_reference_filter_research("TTS 출력 음성 STT 유입 방지 고도화 (추후)<br/><sub>단순 suppress 제거 이후 피드백 루프 완화를 위해<br/>출력 참조 기반 에코 제거/ducking/VAD 정책 검토<br/>WebRTC AEC 한계 및 모바일 브라우저별 편차 검증 필요</sub>")

    %% @demo_limit_server_db_migration [ai-task, opened]
    demo_limit_server_db_migration("데모 제한 서버 DB 기반 전환 (추후)<br/><sub>브라우저 localStorage 기준 60초 제한을<br/>서버 DB 세션/지문 기반 제한으로 마이그레이션<br/>우회 방지/멀티디바이스 일관성 정책 설계 필요</sub>")

    %% @windows_loopback_capture_validation [ai-task, opened]
    windows_loopback_capture_validation("Windows 루프백 캡처 검증 (추후)<br/><sub>WASAPI loopback 경로를 기준으로<br/>디스코드 출력 음성 캡처 가능 여부를<br/>헤드폰 사용 환경 포함해 실측 검증하고<br/>장치/포맷별 예외 케이스를 정리</sub>")

    %% @macos_loopback_capture_validation [ai-task, opened]
    macos_loopback_capture_validation("macOS 루프백 캡처 검증 (추후)<br/><sub>시스템 오디오 캡처 권한 승인 이후<br/>ScreenCaptureKit 경로에서 디스코드<br/>출력 음성을 안정적으로 수집 가능한지<br/>권한 거절/재요청 UX까지 점검</sub>")

    %% @ultimate_goal [end, opened]
    ultimate_goal("Mingle Launch<br/><sub>소셜링 중심의 실시간 번역 앱으로<br/>외국인과 깊이 있는 대화를 나누고<br/>지속적인 관계를 만들어가는 서비스</sub>")

    %% === CONNECTIONS ===
    project_start --> structure_refinement
    structure_refinement --> ui_ux_improvement
    ui_ux_improvement --> gladia_stt_integration
    gladia_stt_integration --> language_selection
    language_selection --> mingle_landing_prototype
    mingle_landing_prototype --> landing_i18n
    landing_i18n --> landing_email_mockups
    landing_email_mockups --> landing_ui_refinement
    landing_ui_refinement --> click_analytics
    click_analytics --> nextjs_fullstack_migration
    nextjs_fullstack_migration --> landing_copy_update
    landing_copy_update --> talk_to_world_section
    talk_to_world_section --> gladia_user_onboarding
    gladia_user_onboarding --> deepgram_integration
    deepgram_integration --> fireworks_integration
    fireworks_integration --> deepgram_multi
    deepgram_multi --> deepgram_multi_fix
    deepgram_multi --> gladia_stt_only
    deepgram_multi --> soniox_integration
    deepgram_multi_fix --> translation_engine_research
    gladia_stt_only --> translation_engine_research
    soniox_integration --> cleanup_and_usage_ui
    cleanup_and_usage_ui --> gpt_translation
    gpt_translation --> translation_engine_research
    gpt_translation --> live_phone_demo
    live_phone_demo --> gemini_translation
    gemini_translation --> demo_ux_and_restructure
    demo_ux_and_restructure --> demo_streaming_polish
    demo_streaming_polish --> demo_usage_limit_ux
    demo_usage_limit_ux --> demo_bugfix_db_logging
    demo_bugfix_db_logging --> prisma_local_simplify
    prisma_local_simplify --> stt_server_landing_merge
    stt_server_landing_merge --> railway_stt_deploy
    railway_stt_deploy --> chat_invite_feature
    railway_stt_deploy --> global_stats_fix
    translation_engine_research --> chat_invite_feature
    translation_engine_research --> translator_feature_build
    chat_invite_feature --> mobile_app_development
    chat_invite_feature --> next_i18n_adoption
    chat_invite_feature --> next_auth_adoption
    chat_invite_feature --> instagram_crawling
    chat_invite_feature --> hellotalk_crawling
    next_auth_adoption --> google_oauth_login
    next_i18n_adoption --> mobile_app_development
    google_oauth_login --> mobile_app_development
    translator_feature_build --> mobile_app_development
    mobile_app_development --> capacitor_app_build
    instagram_crawling --> seed_data_population
    hellotalk_crawling --> seed_data_population
    translation_engine_research --> tts_provider_research
    tts_provider_research --> inworld_non_realtime_strategy
    inworld_non_realtime_strategy --> gaming_tts_test_section_spec
    gaming_tts_test_section_spec --> gaming_tts_test_section_apply
    gaming_tts_test_section_apply --> gaming_tts_queue_ui_polish
    gaming_tts_queue_ui_polish --> tts_mobile_lock_recovery
    tts_mobile_lock_recovery --> mobile_tts_autounlock_and_feedback_guard
    mobile_tts_autounlock_and_feedback_guard --> stt_graceful_stop_finalize_flush
    stt_graceful_stop_finalize_flush --> soniox_provider_finalization_on_stop
    soniox_provider_finalization_on_stop --> demo_limit_60s_inworld_tts_rate
    demo_limit_60s_inworld_tts_rate --> tts_stt_concurrent_input_enable
    tts_stt_concurrent_input_enable --> soniox_endpoint_finalize_immediate_tts
    soniox_endpoint_finalize_immediate_tts --> stop_interrupt_local_finalize_fallback
    stop_interrupt_local_finalize_fallback --> stop_dedupe_scope_fix_for_tts_chain
    stop_dedupe_scope_fix_for_tts_chain --> stop_state_and_partial_translation_promote
    stop_state_and_partial_translation_promote --> stop_immediate_finalize_and_translation_drain
    stop_immediate_finalize_and_translation_drain --> forced_termination_finalize_hooks
    forced_termination_finalize_hooks --> stop_fallback_translate_api_and_fast_restart
    stop_fallback_translate_api_and_fast_restart --> stop_local_server_final_merge_and_tts_guard
    stop_local_server_final_merge_and_tts_guard --> stop_stale_socket_guard_and_final_retranslate
    stop_stale_socket_guard_and_final_retranslate --> stop_partial_gate_and_finalize_parser_harden
    stop_partial_gate_and_finalize_parser_harden --> stop_finalize_retry_and_multi_provider_translate
    stop_finalize_retry_and_multi_provider_translate --> stop_ack_server_final_turn_payload
    stop_ack_server_final_turn_payload --> stop_translation_json_and_single_fallback
    landing_copy_update --> gaming_socialhero_multilingual_copy_refresh
    stop_translation_json_and_single_fallback --> translation_decouple_http
    translation_decouple_http --> finalize_inline_tts_bundle
    finalize_inline_tts_bundle --> finalize_tts_double_playback_rootcause
    finalize_tts_double_playback_rootcause --> finalize_tts_dedupe_alignment_fix
    finalize_tts_dedupe_alignment_fix --> finalize_translate_first_tts_split --> tts_global_queue_sequential_playback --> tts_priority_queue_ordering --> ios_chrome_audio_player_reuse --> ios_safari_lock_resume_recovery --> mingle_app_test_section_migration --> landing_inline_tts_reenable --> tts_queue_race_retrigger_fix --> stt_background_stop_policy_update --> stt_background_auto_recovery --> stt_lock_resume_reconnect_removal --> stt_mic_button_tts_decouple --> tts_queue_watchdog_and_start_prime_guard --> tts_prime_failure_volume_recovery_fix --> stt_lock_resume_reconnect_restore_and_stop_click_tts_resume --> stt_stop_pipeline_without_output_close --> mingle_app_landing_test_section_rebase --> mingle_app_fullscreen_test_surface
    mingle_app_fullscreen_test_surface --> mingle_app_remove_mock_statusbar
    mingle_app_remove_mock_statusbar --> mingle_app_client_only_live_demo
    mingle_app_client_only_live_demo --> mingle_app_favicon_sync
    mingle_app_favicon_sync --> mingle_app_global_scroll_lock
    mingle_app_global_scroll_lock --> mingle_app_under480_fullwidth_scale_shell
    mingle_app_under480_fullwidth_scale_shell --> mingle_app_top_level_scale_only
    mingle_app_top_level_scale_only --> mingle_app_fixed_footer_via_svh_and_flex_constraints
    mingle_app_fixed_footer_via_svh_and_flex_constraints --> mingle_app_footer_bottom_anchor_with_frame_height_inheritance
    mingle_app_footer_bottom_anchor_with_frame_height_inheritance --> shared_live_demo_core_package_split
    shared_live_demo_core_package_split --> mingle_app_remove_60s_usage_limit
    mingle_app_remove_60s_usage_limit --> mingle_app_ios_scaffold
    mingle_app_remove_60s_usage_limit --> live_demo_core_demo_logic_split
    mingle_app_ios_scaffold --> xcode_install_and_ios_device_build
    mingle_app_remove_60s_usage_limit --> tts_echo_reference_filter_research
    mingle_app_remove_60s_usage_limit --> windows_loopback_capture_validation
    mingle_app_remove_60s_usage_limit --> macos_loopback_capture_validation
    tts_echo_reference_filter_research --> demo_limit_server_db_migration
    demo_limit_server_db_migration --> chat_invite_feature
    seed_data_population --> mobile_app_development
    capacitor_app_build -.-> ultimate_goal
    mobile_app_development -.-> ultimate_goal

    %% === RECENT WORK HIGHLIGHT ===
    subgraph recent [RECENT]
        live_demo_core_demo_logic_split
    end

    %% === STYLES ===
    %% Start node (closed, purple)
    style project_start fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:2px

    %% Ultimate Goal (opened, green)
    style ultimate_goal fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px

    %% Closed tasks (soft purple)
    style structure_refinement fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style ui_ux_improvement fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style gladia_stt_integration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style language_selection fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_landing_prototype fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style landing_i18n fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style landing_email_mockups fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style landing_ui_refinement fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style click_analytics fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style nextjs_fullstack_migration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style landing_copy_update fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style talk_to_world_section fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Blocker node (closed, purple)
    style gladia_user_onboarding fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    style deepgram_integration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    style fireworks_integration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style deepgram_multi fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent nodes (now closed)
    style deepgram_multi_fix fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style gladia_stt_only fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style soniox_integration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style cleanup_and_usage_ui fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style gpt_translation fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style live_phone_demo fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style gemini_translation fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style demo_ux_and_restructure fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style demo_streaming_polish fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style demo_usage_limit_ux fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style demo_bugfix_db_logging fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style prisma_local_simplify fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style stt_server_landing_merge fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Previous recent node (now closed)
    style railway_stt_deploy fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Closed recent-complete node
    style global_stats_fix fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px

    %% Completed tasks in this run
    style translation_engine_research fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_provider_research fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style inworld_non_realtime_strategy fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style chat_invite_feature fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style mobile_app_development fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style next_i18n_adoption fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style next_auth_adoption fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style google_oauth_login fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style capacitor_app_build fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style translator_feature_build fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style seed_data_population fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style instagram_crawling fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    %% Recent node (highlighted purple)
    style gaming_tts_test_section_apply fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style gaming_tts_test_section_spec fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style gaming_tts_queue_ui_polish fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_mobile_lock_recovery fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mobile_tts_autounlock_and_feedback_guard fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_graceful_stop_finalize_flush fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style soniox_provider_finalization_on_stop fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style demo_limit_60s_inworld_tts_rate fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_stt_concurrent_input_enable fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style soniox_endpoint_finalize_immediate_tts fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_interrupt_local_finalize_fallback fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_dedupe_scope_fix_for_tts_chain fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_state_and_partial_translation_promote fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_immediate_finalize_and_translation_drain fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style forced_termination_finalize_hooks fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_fallback_translate_api_and_fast_restart fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_local_server_final_merge_and_tts_guard fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_stale_socket_guard_and_final_retranslate fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_partial_gate_and_finalize_parser_harden fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_finalize_retry_and_multi_provider_translate fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_ack_server_final_turn_payload fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stop_translation_json_and_single_fallback fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style gaming_socialhero_multilingual_copy_refresh fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style finalize_inline_tts_bundle fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style finalize_tts_dedupe_alignment_fix fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style finalize_translate_first_tts_split fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_global_queue_sequential_playback fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_priority_queue_ordering fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style ios_chrome_audio_player_reuse fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style ios_safari_lock_resume_recovery fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_test_section_migration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style landing_inline_tts_reenable fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_queue_race_retrigger_fix fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_background_stop_policy_update fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_background_auto_recovery fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_lock_resume_reconnect_removal fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_mic_button_tts_decouple fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_queue_watchdog_and_start_prime_guard fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_prime_failure_volume_recovery_fix fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_lock_resume_reconnect_restore_and_stop_click_tts_resume fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_stop_pipeline_without_output_close fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_landing_test_section_rebase fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_fullscreen_test_surface fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_remove_mock_statusbar fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_client_only_live_demo fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_favicon_sync fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_global_scroll_lock fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_under480_fullwidth_scale_shell fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_top_level_scale_only fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_fixed_footer_via_svh_and_flex_constraints fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_footer_bottom_anchor_with_frame_height_inheritance fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style shared_live_demo_core_package_split fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_remove_60s_usage_limit fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_ios_scaffold fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style live_demo_core_demo_logic_split fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style xcode_install_and_ios_device_build fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style tts_echo_reference_filter_research fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style demo_limit_server_db_migration fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style windows_loopback_capture_validation fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style macos_loopback_capture_validation fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px
    style hellotalk_crawling fill:#1a1a2e,stroke:#4ade80,color:#86efac,stroke-width:1px

    %% Last active node (highlighted purple)
    style translation_decouple_http fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style finalize_tts_double_playback_rootcause fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style finalize_tts_dedupe_alignment_fix fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style finalize_translate_first_tts_split fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_global_queue_sequential_playback fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_priority_queue_ordering fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style ios_chrome_audio_player_reuse fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style ios_safari_lock_resume_recovery fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_test_section_migration fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style landing_inline_tts_reenable fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_queue_race_retrigger_fix fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_background_stop_policy_update fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_background_auto_recovery fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_lock_resume_reconnect_removal fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_mic_button_tts_decouple fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_queue_watchdog_and_start_prime_guard fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style tts_prime_failure_volume_recovery_fix fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_lock_resume_reconnect_restore_and_stop_click_tts_resume fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style stt_stop_pipeline_without_output_close fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_landing_test_section_rebase fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_fullscreen_test_surface fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_remove_mock_statusbar fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_client_only_live_demo fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_favicon_sync fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_global_scroll_lock fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_under480_fullwidth_scale_shell fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_top_level_scale_only fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_fixed_footer_via_svh_and_flex_constraints fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_footer_bottom_anchor_with_frame_height_inheritance fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style shared_live_demo_core_package_split fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_remove_60s_usage_limit fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style mingle_app_ios_scaffold fill:#1a1a2e,stroke:#a78bfa,color:#c4b5fd,stroke-width:1px
    style live_demo_core_demo_logic_split fill:#2d1f4e,stroke:#c084fc,color:#e9d5ff,stroke-width:2px

    %% Blocked subgraph style (red dashed)
    %% Recent subgraph style
    style recent fill:transparent,stroke:#c084fc,color:#c084fc,stroke-width:2px,stroke-dasharray:5 5
